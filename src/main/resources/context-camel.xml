<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
    ">

        <bean id="jmsConnectionFactory"
                class="org.apache.activemq.ActiveMQSslConnectionFactory">
            <property name="brokerURL" value="tcp://localhost:61616" /> <!-- can be ssl://-->
            <property name="userName" value="admin"/>
            <property name="password" value="admin"/>
            <!-- <property name="trustStore" value="/conf/client.ts"/> for ssl --> 
            <!-- <property name="trustStorePassword" value="password"/> for ssl -->
        </bean>

        <bean id="pooledConnectionFactory"
                class="org.apache.activemq.pool.PooledConnectionFactory">
            <property name="maxConnections" value="8" />
            <property name="connectionFactory" ref="jmsConnectionFactory" />
        </bean>

        <bean id="jmsConfig" class="org.apache.camel.component.jms.JmsConfiguration">
            <property name="connectionFactory" ref="pooledConnectionFactory"/>
            <property name="transacted" value="false"/>
            <property name="concurrentConsumers" value="10"/>
        </bean>

        <bean id="activemqssl"
                class="org.apache.activemq.camel.component.ActiveMQComponent">
            <property name="configuration" ref="jmsConfig"/>
        </bean>


    <camelContext xmlns="http://camel.apache.org/schema/spring">

        <!-- example using mqtt -->
        <route id="mqtt-test">
            <from uri="mqtt:IoT?host=tcp://localhost:1883&amp;subscribeTopicName=iot-mqtt"/>
            <log message="The message contains ${body}" loggingLevel="INFO" customId="true" id="iot_log">
                <description>Logs all the incoming MQTT messages. This is just
            for verification purpouses.</description>
            </log>
            <to uri="mqtt:IoT2?host=tcp://localhost:1883&amp;publishTopicName=iot-mqtt2"/>
        </route>

        <!-- example using ACTIVEMQ -->
        <route id="activemq-test">
            <from uri="activemqssl:queue:HELLO.WORLD"/>
            <log message="The message contains ${body}" loggingLevel="INFO" customId="true" id="activemq_log">
                <description>Logs all the incoming MQTT messages. This is just
            for verification purpouses.</description>
            </log>
            <to uri="activemqssl:queue:HELLO.WORLD2"/>
        </route>

    </camelContext>

</beans>